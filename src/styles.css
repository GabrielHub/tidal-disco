@import "tailwindcss";

@theme {
  --color-bg: #f5f0e8;
  --color-surface: #fffdf8;
  --color-surface-alt: #ece7dd;
  --color-border: #d4cdc0;
  --color-border-light: #e8e2d8;
  --color-text: #1a1814;
  --color-text-muted: #6b6560;
  --color-text-dim: #9e968c;
  --color-accent: #e63946;
  --color-accent-hover: #d62b39;
  --color-gap-fill: #4361ee;
  --color-deep-cut: #e76f51;
  --color-emerging: #2a9d8f;

  --font-display: 'Instrument Serif', 'Georgia', serif;
  --font-body: 'Outfit', system-ui, sans-serif;
}

/* ---- Base ---- */

body {
  background-color: var(--color-bg);
  color: var(--color-text);
  font-family: var(--font-body);
}

::selection {
  background-color: var(--color-accent);
  color: #fff;
}

/* ---- Paper Grain ---- */

.paper-grain {
  position: fixed;
  inset: 0;
  z-index: 50;
  pointer-events: none;
  opacity: 0.025;
  mix-blend-mode: multiply;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='a'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.65' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23a)' opacity='1'/%3E%3C/svg%3E");
}

/* ---- Scrollbar ---- */

::-webkit-scrollbar { width: 5px; }
::-webkit-scrollbar-track { background: var(--color-bg); }
::-webkit-scrollbar-thumb { background: var(--color-border); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--color-text-dim); }

/* ---- Keyframes ---- */

@keyframes fade-up {
  from { opacity: 0; transform: translateY(24px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slide-in-left {
  from { opacity: 0; transform: translateX(-20px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes slide-in-right {
  from { opacity: 0; transform: translateX(20px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes scale-in {
  from { opacity: 0; transform: scale(0.92); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes pulse-bar {
  0%, 100% { transform: scaleY(0.3); }
  50% { transform: scaleY(1); }
}

@keyframes typewriter {
  from { width: 0; }
  to { width: 100%; }
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

/* ---- Utility Classes ---- */

.animate-fade-up {
  animation: fade-up 0.7s cubic-bezier(0.16, 1, 0.3, 1) both;
}

.animate-fade-in {
  animation: fade-in 0.5s ease-out both;
}

.animate-slide-left {
  animation: slide-in-left 0.6s cubic-bezier(0.16, 1, 0.3, 1) both;
}

.animate-slide-right {
  animation: slide-in-right 0.6s cubic-bezier(0.16, 1, 0.3, 1) both;
}

.animate-scale-in {
  animation: scale-in 0.5s cubic-bezier(0.16, 1, 0.3, 1) both;
}

/* ---- Editorial Accent Line ---- */

.accent-line {
  position: relative;
}
.accent-line::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 100%;
  height: 2px;
  background: var(--color-accent);
}

/* ---- Tracklist Row ---- */

.track-row {
  transition: background-color 0.15s, transform 0.15s;
}
.track-row:hover {
  background-color: var(--color-surface);
  transform: translateX(4px);
}

/* ---- Discovery Type Badge Colors ---- */

.badge-gap_fill {
  color: var(--color-gap-fill);
  border-color: color-mix(in srgb, var(--color-gap-fill) 30%, transparent);
  background: color-mix(in srgb, var(--color-gap-fill) 8%, transparent);
}

.badge-deep_cut {
  color: var(--color-deep-cut);
  border-color: color-mix(in srgb, var(--color-deep-cut) 30%, transparent);
  background: color-mix(in srgb, var(--color-deep-cut) 8%, transparent);
}

.badge-emerging {
  color: var(--color-emerging);
  border-color: color-mix(in srgb, var(--color-emerging) 30%, transparent);
  background: color-mix(in srgb, var(--color-emerging) 8%, transparent);
}

/* ---- Confidence Meter ---- */

.confidence-bar {
  background: linear-gradient(90deg, var(--color-border), var(--color-accent));
}

/* ---- Loading Pulse Bars ---- */

.loading-bar {
  transform-origin: bottom;
  animation: pulse-bar ease-in-out infinite;
}

/* ---- Input Focus ---- */

.input-editorial:focus-within {
  border-color: var(--color-text);
  box-shadow: 0 2px 0 0 var(--color-text);
}

/* ---- Large Serif Numbers ---- */

.step-number {
  font-family: var(--font-display);
  font-size: clamp(4rem, 12vw, 10rem);
  line-height: 0.85;
  color: var(--color-border-light);
  transition: color 0.5s;
}
.step-number.active {
  color: var(--color-accent);
}
.step-number.done {
  color: var(--color-border);
  text-decoration: line-through;
  text-decoration-color: var(--color-text-dim);
}

/* ---- Horizontal Rule Styles ---- */

hr.editorial {
  border: none;
  height: 1px;
  background: var(--color-border);
}

hr.editorial-thick {
  border: none;
  height: 3px;
  background: var(--color-text);
}

hr.editorial-double {
  border: none;
  height: 0;
  border-top: 3px double var(--color-border);
}
